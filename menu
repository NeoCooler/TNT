#!/bin/bash

############################################################################
#
# Copyright (c) 2013 - NeoTeam (neocooler29@gmail.com)
#
# TNT(Tools NeoTeam) is 100% free.  This script file is intended for 
# personal and/or educational use only.  
# It may not be duplicated for monetary benefit or any other purpose 
# Without the permission of the developer.
#
############################################################################

version=0.016

source script/colors
echo -e "$NORMALE"

if [ ! -e menu ]
then
	echo
	echo -e "$Red" "Ensure you run this file from the SAME folder as where it was"
	echo -e "installed, otherwise TNT will have problems run."
	echo -e "After you 'cd' to TNT folderStart TNT"
	cho -e "Start TNT with the ./menu command!!!" "$NORMAL"
	exit 0
fi

chmod 755 android_tools/*
chmod 755 script/*
chmod 755 tnt_store/*
chmod 755 update/*

if [ "$?" == "1" ]
then
	exit 0
fi

while :
do
	clear
	online_vers=`update/check_update`
	rm -f Last_CHANGELOG
	last_vers=`echo $online_vers | sed -e 's/.*Version[ ]*\([0-9]*.[0-9]*\) (.*/\1/g' -e 's/[ ]*//g'`
	curr_major=`echo $version | sed 's/\([0-9]*\).[0-9]*/\1/'`
	curr_minor=`echo $version | sed 's/[0-9]*.//'`
	last_major=`echo $last_vers | sed 's/\([0-9]*\).[0-9]*/\1/'`
	last_minor=`echo $last_vers | sed 's/[0-9]*.//'`
	update=1
	if [ $curr_major -gt $last_major ]
	then
		update=0
	else
	if [ $curr_major -eq $last_major ]
	then
		if [ $curr_minor -ge $last_minor ]
		then
			update=0
		fi
	fi
fi
if [ $update == 0 ] 
then
	echo -e "$Cyan" "==No Update=================================================" "$NORMAL"
else
	echo -e "$Cyan" "==InfoBox===================================================" "$NORMAL"
	echo -e "$Magenta" "New Update online ($Red_K V.$last_vers$Magenta ) Option (n) => Direct UPDATE !!" "$NORMAL"
	echo -e "$Cyan" "============================================================" "$NORMAL"
fi
echo -e "     $Green_BU"" ToolsNeoTeam V.$version - by NeoCooler aka krisjanne" "$NORMAL"
echo -e "$Cyan" "============================================================" "$NORMAL"
echo -e "$Cyan" "->$NORMAL$White MAIN MENU$NORMAL"
echo -e "$Magenta"
echo -e "     1 -$White_K TNT Store.$Magenta"
echo -e "     2 -$White_K Android Tools.$Magenta"
echo
echo -e "     u -$White_K Updates.$Magenta"
echo
echo -e "     x -$White_K Exit.$Magenta"
echo -e "$NORMAL"
echo -e -n "$Yellow" " Choose option:" "$White_B"
read tntopt
echo
echo -e "$NORMAL"

if [ "$?" != "1" ]
then
	case "$tntopt" in
		1 ) clear; tnt_store/tnt_store $version; continue;;
		2 ) clear; android_tools/android_tools $version; continue;;
		u ) clear; update/update $version; continue;;
		n ) clear; update/updater $version; continue;;
		x ) clear; echo -e "$Blue_B" "Goodbey !" "$NORMAL"; echo; exit 1;;
		* ) echo -e "$Red_B" " Invalid option" "$NORMAL";;
	esac
fi
script/press_enter
done
